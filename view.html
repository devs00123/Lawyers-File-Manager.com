<!doctype html><html><head><meta charset="utf-8"><title>View Case</title><link rel="stylesheet" href="styles.css"></head><body>
<h1>View Case</h1>
<div id="caseView"></div>
<script>
(async ()=>{
  const params = new URLSearchParams(location.search);
  const id = params.get("id");
  if (!id) { document.getElementById("caseView").innerText="No id"; return; }
  const ownerEmail = localStorage.getItem("userEmail");
  const resp = await fetch("https://script.google.com/macros/s/AKfycbyvSEkJ0E3k13msqzW2HtrU_jgwMEK68jfgXG2JdOdB9YfDUVAPR0coLfWRhe6Gy9csoQ/exec", { method:"POST", headers:{"Content-Type":"application/json"}, body: JSON.stringify({ ownerEmail, getCases:true }) });
  const data = await resp.json();
  const c = data.find(x=>String(x.id)===String(id));
  if (!c) { document.getElementById("caseView").innerText="Not found"; return; }
  document.getElementById("caseView").innerHTML = `<h2>${c.case_title}</h2><p>Client: ${c.client_name}</p><p>Current: ${c.current_hearing}</p><p>Next: ${c.next_hearing}</p><p>Purpose: ${c.purpose}</p>`;
})();
</script>
</body></html>